<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dual YouTube Karaoke Player</title>
<style>
 body {
   margin: 0;
   font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
   background: linear-gradient(135deg, #5b2c83, #1e3c72);
   color: #fff;
   min-height: 100vh;
   display: flex;
   flex-direction: column;
   align-items: center;
 }
 h1 {
   margin-top: 20px;
   font-size: 2rem;
 }
 .container {
   backdrop-filter: blur(10px);
   background: rgba(255,255,255,0.1);
   border-radius: 12px;
   padding: 20px;
   width: 90%;
   max-width: 1000px;
   box-shadow: 0 4px 20px rgba(0,0,0,0.2);
   margin-bottom: 20px;
 }
 .search-section input[type="text"],
 .video-inputs input[type="text"] {
   width: 100%;
   padding: 10px;
   margin-bottom: 10px;
   border-radius: 8px;
   border: none;
 }
 button {
   padding: 10px 20px;
   border: none;
   border-radius: 8px;
   background: linear-gradient(135deg, #7b42f6, #b01eff);
   color: #fff;
   cursor: pointer;
   transition: transform 0.2s, box-shadow 0.2s;
 }
 button:hover {
   transform: translateY(-2px);
   box-shadow: 0 4px 10px rgba(0,0,0,0.3);
 }
 iframe.search-results {
   width: 100%;
   height: 300px;
   border: none;
 }
 .search-results-wrapper {
   display: grid;
   grid-template-columns: 1fr 1fr;
   gap: 10px;
 }
 .players {
   display: grid;
   grid-template-columns: 1fr 1fr;
   gap: 10px;
 }
 .player {
   display: flex;
   flex-direction: column;
 }
 .controls {
   display: flex;
   flex-wrap: wrap;
   gap: 10px;
   align-items: center;
   justify-content: center;
 }
 .volume-control, .offset-control {
   display: flex;
   align-items: center;
   gap: 5px;
 }
 input[type="range"] {
   width: 150px;
 }
 .status {
   margin-top: 10px;
   padding: 8px;
   border-radius: 6px;
   display: none;
 }
 .status.show {
   display: block;
 }
 @media (max-width: 700px) {
   .search-results-wrapper, .players {
     grid-template-columns: 1fr;
   }
 }
</style>
</head>
<body>
<h1>üé§ Dual YouTube Karaoke Player</h1>
<div class="container search-section">
  <input id="song-query" type="text" placeholder="Enter song name" />
  <button id="search-btn">üîç Search</button>
  <div class="status" id="search-status"></div>
  <div class="search-results-wrapper" id="results-wrapper" style="display:none;">
    <iframe class="search-results" id="full-search" loading="lazy" allowfullscreen allow="autoplay"></iframe>
    <iframe class="search-results" id="karaoke-search" loading="lazy" allowfullscreen allow="autoplay"></iframe>
  </div>
</div>
<div class="container video-inputs">
  <div class="players">
    <div class="player">
      <label>Karaoke Version URL</label>
      <input id="karaoke-url" type="text" placeholder="Paste karaoke video URL here" />
      <div id="karaoke-player"></div>
    </div>
    <div class="player">
      <label>Full Song URL</label>
      <input id="full-url" type="text" placeholder="Paste full song URL here" />
      <div id="full-player"></div>
    </div>
  </div>
  <button id="load-btn">Load Videos</button>
  <div class="status" id="load-status"></div>
</div>
<div class="container controls">
  <div class="volume-control">üîà Karaoke Volume <input id="karaoke-vol" type="range" min="0" max="100" value="100" /></div>
  <div class="volume-control">üîä Full Volume <input id="full-vol" type="range" min="0" max="100" value="100" /></div>
  <div class="offset-control">‚è±Ô∏è Offset <span id="offset-val">0s</span> <input id="offset" type="range" min="-10" max="10" value="0" step="0.1" /></div>
  <button id="play-btn">‚ñ∂Ô∏è Play</button>
  <button id="pause-btn">‚è∏Ô∏è Pause</button>
  <button id="restart-btn">‚èÆÔ∏è Restart</button>
  <button id="sync-btn">üîÑ Sync Now</button>
</div>
<script>
let players = {karaoke: null, full: null};
let offset = 0;
function showStatus(el, msg, type){
  el.textContent = msg;
  el.className = 'status show';
  if(type==='error') el.style.background='#ff5555';
  else if(type==='success') el.style.background='#55aa55';
  else el.style.background='rgba(255,255,255,0.2)';
}
function parseId(url){
  try{
    let m = url.match(/(?:v=|youtu.be\/|embed\/)([\w-]{11})/);
    return m ? m[1] : null;
  }catch(e){return null;}
}
function loadVideos(){
  const kId = parseId(document.getElementById('karaoke-url').value.trim());
  const fId = parseId(document.getElementById('full-url').value.trim());
  const status = document.getElementById('load-status');
  if(!kId || !fId){
    showStatus(status,'Please enter valid YouTube URLs','error');
    return;
  }
  showStatus(status,'Loading videos...');
  if(players.karaoke) players.karaoke.loadVideoById(kId); else players.karaoke = new YT.Player('karaoke-player',{videoId:kId,events:{onReady:onPlayerReady}});
  if(players.full) players.full.loadVideoById(fId); else players.full = new YT.Player('full-player',{videoId:fId,events:{onReady:onPlayerReady}});
}
function onPlayerReady(){
  document.getElementById('load-status').style.background='#55aa55';
  document.getElementById('load-status').textContent='Videos loaded';
}
function setVolumes(){
  if(players.karaoke) players.karaoke.setVolume(document.getElementById('karaoke-vol').value);
  if(players.full) players.full.setVolume(document.getElementById('full-vol').value);
}
function syncNow(){
  if(players.karaoke && players.full){
    const time = players.full.getCurrentTime();
    players.karaoke.seekTo(time + parseFloat(offset), true);
  }
}
function playVideos(){
  syncNow();
  players.karaoke && players.karaoke.playVideo();
  players.full && players.full.playVideo();
}
function pauseVideos(){
  players.karaoke && players.karaoke.pauseVideo();
  players.full && players.full.pauseVideo();
}
function restartVideos(){
  players.karaoke && players.karaoke.seekTo(parseFloat(offset), true);
  players.full && players.full.seekTo(0, true);
  playVideos();
}
function onYouTubeIframeAPIReady(){
  // placeholder, players will be created on loadVideos
}
// Search functionality
function performSearch(){
  const q = document.getElementById('song-query').value.trim();
  const status = document.getElementById('search-status');
  if(!q){showStatus(status,'Enter a song name','error');return;}
  showStatus(status,'Searching...');
  document.getElementById('results-wrapper').style.display='grid';
  const esc = encodeURIComponent;
  document.getElementById('full-search').src = 'https://www.youtube.com/embed?listType=search&list='+esc(q);
  document.getElementById('karaoke-search').src = 'https://www.youtube.com/embed?listType=search&list='+esc(q+' karaoke');
  status.style.background='#55aa55';
  status.textContent='Results loaded. Copy video URLs.';
  setTimeout(()=>document.getElementById('results-wrapper').scrollIntoView({behavior:'smooth'}),500);
}
// Event bindings
window.addEventListener('DOMContentLoaded',()=>{
  document.getElementById('search-btn').addEventListener('click',performSearch);
  document.getElementById('song-query').addEventListener('keydown',e=>{if(e.key==='Enter') performSearch();});
  document.getElementById('load-btn').addEventListener('click',loadVideos);
  document.getElementById('karaoke-vol').addEventListener('input',setVolumes);
  document.getElementById('full-vol').addEventListener('input',setVolumes);
  document.getElementById('offset').addEventListener('input',e=>{offset=parseFloat(e.target.value);document.getElementById('offset-val').textContent=offset+'s';});
  document.getElementById('play-btn').addEventListener('click',playVideos);
  document.getElementById('pause-btn').addEventListener('click',pauseVideos);
  document.getElementById('restart-btn').addEventListener('click',restartVideos);
  document.getElementById('sync-btn').addEventListener('click',syncNow);
});
</script>
<script src="https://www.youtube.com/iframe_api"></script>
</body>
</html>
